{% extends "layout.html" %}
{% set title %}{{ subject.name or 'Maths' }}{% endset %}
{% block page_title %}{{ title }}{% endblock %}

{% block content %}

<main id="content" role="main">
  {% include "includes/phase_banner_beta.html" %}
  <div class="breadcrumbs">
    <ol>
      <li><a href="/courses">Courses</a></li>
    </ol>
  </div>

  {% if data[subject.slug + '-' + accrediting.slug + '-qa'] == 'true' %}
    <div class="success-summary" role="alert" aria-labelledby="success-summary-heading-example-1" tabindex="-1" style="margin-bottom: 60px">
      <h3 class="heading-medium success-summary-heading" id="success-summary-heading-example-1">
        {{ title }} has been sent to DfE for review
      </h3>
      <p>
        You will receive an email when the course is published or if changes are needed.
      </p>
    </div>
  {% endif %}

  <h1 class="heading-xlarge">
    {{ title }}
    {% if not accrediting.selfAccrediting %}<span class="heading-secondary">Accredited by {{ accrediting.name }}</span>{% endif %}
  </h1>

  <div class="grid-row add-top-margin">
    <div class="column-two-thirds">
      <table class="ucas-info-table">
        <thead>
          <tr>
            <th>UCAS code</th>
            <th>Type</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for course in data['ucasCourses'] %}
            {% if course.name == subject.name and course.accrediting == accrediting.name %}
              <tr>
                <td>{{ course.programmeCode }}</td>
                <td>{{ course.options }}</td>
                <td class="ucas-view-link"><a href="/course/{{ accrediting.slug }}/{{ subject.slug }}/ucas/{{ course.programmeCode }}">View UCAS data</a></td>
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>

      <h2 class="heading-large">Courses offered</h2>
      <div class="course-parts course-parts--large add-top-margin">
        <ul class="course-parts-items">
          {% for option in subject.folded_course.options %}
            <li class="course-parts-item">
              <h3 class="course-part-task">{{ option }}</h3>

              <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ subject.slug }}/option/{{ loop.index }}">Add details</a>
              <dl class="course-part-tasks">
                <!-- <div>
                  <dt class="course-part-label">
                    UCAS course codes
                  </dt>
                  <dd class="course-part-value">
                    {% for course in data['ucasCourses'] %}
                      {% if course.name == subject.name and course.accrediting == accrediting.name and course.options == option %}
                        {{ course.programmeCode }} â€“ <a href="/course/{{ accrediting.slug }}/{{ subject.slug }}/ucas/{{ course.programmeCode }}">View UCAS data</a><br />
                        </tr>
                      {% endif %}
                    {% endfor %}
                  </dd>
                </div> -->
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-about-this-course', 'About this course') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-course-website', 'Webpage (optional)') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-fee', 'Fee for UK and EU students') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-fee-international', 'Fee for international students (optional)') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-duration', 'Duration') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-interview-process', 'Interview process (optional)') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-' + loop.index + '-placement-school-policy', 'How school placements work') }}
              </dl>
            </li>
          {% endfor %}
        </ul>
      </div>

      <h2 class="heading-large">Shared course details</h2>
      <div class="course-parts course-parts--large add-top-margin">
          <ul class="course-parts-items">
            <li class="course-parts-item">
              <h3 class="course-part-task">
                About your organisation
              </h3>
              <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ subject.slug }}/about-this-provider">Edit</a>
              <dl class="course-part-tasks">
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-about-organisation', 'About your organisation') }}

                {% if not accrediting.selfAccrediting %}
                  {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-about-accrediting-provider', 'About the accrediting provider (optional)') }}
                {% endif %}

                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-training-with-a-disability', 'Training with a disability') }}
              </dl>
            </li>
            <li class="course-parts-item">
              <h3 class="course-part-task">
                Requirements and eligbility
              </h3>
              <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ subject.slug }}/requirements">Edit</a>

              <dl class="course-part-tasks">
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-qualifications-required', 'Qualifications needed') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-personal-qualities', 'Personal qualities (optional)') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-other-requirements', 'Other requirements (optional)') }}
              </dl>
            </li>
            {% if subject.folded_course.flags.qualifications %}
            <!-- <li class="course-parts-item">
              <h3 class="course-part-task">
                Qualification
              </h3>
              <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ subject.slug }}/qualification-options">Edit</a>
              <dl class="course-part-tasks">
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-pgce-with-qts-qual', 'PGCE with QTS') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-pgce-with-qts-qual-fee', 'PGCE with QTS course fee') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-qts-qual', 'QTS') }}
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-qts-qual-fee', 'QTS course fee') }}
              </dl>
            </li> -->
            {% endif %}
            {% if subject.folded_course.flags.salary %}
            <!-- <li class="course-parts-item">
              <h3 class="course-part-task">
                Salary
              </h3>
              <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ subject.slug }}/salary-options">Edit</a>
              <dl class="course-part-tasks">
                {{ macros.coursePart(subject.slug + '-' + accrediting.slug + '-salaried', 'Earn a salary while you train') }}
              </dl>
            </li> -->
            {% endif %}
          </ul>
      </div>

    </div>
    <div class="column-one-third">
      <p>
        <a href="/preview/{{ accrediting.slug }}/{{ subject.slug }}">Preview course</a>
      </p>
      <form action="/course/{{ accrediting.slug }}/{{ subject.slug }}" method="post">
        <input type="hidden" name="{{ subject.slug }}-qa" value="true" />
        <input type="submit" value="Send to DfE" class="button" />
      </form>
    </div>
  </div>
</main>

{% endblock %}
